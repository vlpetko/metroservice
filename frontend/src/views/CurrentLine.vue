<template>    <div class="container">        <router-view></router-view>        <b-jumbotron class="mPageTitle">            <template>                <div class="mPage">                    <b-overlay :show="busy" rounded="lg" opacity="0.6" z-index="40">                        <template #overlay>                            <div class="d-flex align-items-center">                                <b-spinner small type="grow" variant="secondary"></b-spinner>                                <b-spinner type="grow" variant="dark"></b-spinner>                                <b-spinner small type="grow" variant="secondary"></b-spinner>                                <!-- We add an SR only text for screen readers -->                                <span class="sr-only">Please wait...</span>                            </div>                        </template>                        <b-row class="main_first">                            <b-col>"{{this.$route.params.Line}}"</b-col>                        </b-row>                        <b-table                                id="line-table"                                class="b_table"                                ref="selectableTable"                                selectable                                :select-mode="selectMode"                                :items="metroStations"                                :fields="lineFields"                                :bordered="true"                                responsive="sm"                                :per-page="perPage"                                :current-page="currentPage"                                thead-class="bg-light"                        >                            <template #cell(id)="data">                    <span class="selected" >                    {{  data.index + 1 + pageSize*(page-1) }}                         </span>                            </template>                        </b-table><!--                        <b-row>--><!--                            <b-col>--><!--                            </b-col>--><!--                            <b-col lg="4 justify-content-end d-flex">--><!--                                <b-pagination--><!--                                        size="sm"--><!--                                        v-model="page"--><!--                                        :total-rows="totalLines"--><!--                                        :per-page="pageSize"--><!--                                        prev-text="След"--><!--                                        next-text="Пред"--><!--                                        @change="handlePageChange"--><!--                                ></b-pagination>--><!--                            </b-col>--><!--                        </b-row>-->                    </b-overlay>                </div>            </template>        </b-jumbotron>    </div></template><script>    import axios from 'axios'    export default {        computed: {        },        components: {},        name: 'CurrentLine',        watch: {            $route: {                immediate: true,                handler(to) {                    document.title = to.meta.title || 'MosMetro';                }            },        },        data() {            return {                currentLine: '',                busy: false,                perPage: 100,                currentPage: 1,                lineFields: [                    {key: 'id', label: "№"},                    {key: 'nameOfStation', label: 'Наименование станции', sortable: true},                ],                items: [],                metroStations: [],                selectMode: 'single',                page: 1,                totalLines: 0,                pageSize: 6,                totalPages: 0,                lineCount: 1,                orderStationsBy: 'nameOfStation',            };        },        methods: {            getAllLinesRequestParams(page, pageSize, orderStationsBy) {                let params = {};                if (page) {                    params["page"] = page - 1;                }                if (pageSize) {                    params["pageSize"] = pageSize;                }                if (orderStationsBy) {                    params["orderStationsBy"] = orderStationsBy;                }                return params;            },            handlePageChange(value) {                this.page = value;                this.getLineById();            },            // getLineById() {            //     this.busy = true;            //     const params = this.getAllLinesRequestParams(            //         this.page,            //         this.pageSize,            //         this.orderStationsBy            //     );            //            //     let id = this.$route.params.Pid;            //            //     axios.get('/api/line/current/' + id,            //         {            //             params: {            //                 pageSize: params["pageSize"],            //                 pageNo: params["page"],            //                 orderStationsBy: params["orderStationsBy"]            //             }            //         })            //         .then(response => {            //                 if (response.data.length !== 0) {            //                     this.message = "Список линий загружен"            //                     this.currentLine = response.data.metroStations[0].lineName;            //                     this.metroStations = response.data.metroStations            //                     this.totalLines = response.data.totalLines;            //                     this.totalPages = response.data.totalPages;            //                     this.$bvToast.show('success-toast')            //                 } else {            //                     this.message = "Список пуст"            //                     this.$bvToast.show('danger-toast')            //                 }            //         // .then(response => {            //         // this.currentLine = response.data;            //         // this.metroStations = [...new Map(response.data.metroStations.map(item => [item['nameOfStation'], item])).values()];            //     }).catch(() => {            //     }).finally(() => {            //         this.busy = false            //     })            // },            getLineById() {                this.busy = true;                let id = this.$route.params.Pid;                axios.post('/api/line/current/' + id)                    .then(response => {                            this.message = "Список линий загружен"                            this.currentLine = response.data.line;                            console.log('currentLine: ' + this.currentLine)                            this.metroStations = response.data.stations                            console.log('metroStations: ' + response.data.stations)                            this.$bvToast.show('success-toast')                    }).catch(() => {                }).finally(() => {                    this.busy = false                })            },        },        beforeMount() {            this.getLineById();        },    };    import 'bootstrap/dist/css/bootstrap.css'    import 'bootstrap-vue/dist/bootstrap-vue.css'</script><style scoped>    .mPage {        margin: 10px 10px 50px 10px;        font-size: large;    }    .mPageTitle {        font-family: Arial;        margin: 30px 10px 20px 10px;        font-size: 28px;        text-align: center;    }    .main_first {        margin: 0px 0px 50px 0px;        font-size: larger;        text-align: center;    }    .b_table {        text-align: center;        font-size: smaller;    }    .selected {        text-align: center;    }    /deep/ .table > tbody > tr.b-table-row-selected > td,    /deep/ .table > tbody > tr.b-table-row-selected > th {        background-color: #DCEDFC;        border: 2px solid #8797A5;    }    /deep/ .table > tbody > tr,    /deep/ .table > tbody > tr > td,    /deep/ .table > tbody > tr > th {        background-color: white;        border: 1px solid #8797A5;    }    /deep/ .table > thead > tr,    /deep/ .table > thead > tr > td,    /deep/ .table > thead > tr > th {        background-color: white;        border: 2px solid #8797A5;    }</style>