<template>    <div class="mPage">        <editor-menu                v-bind:lineId ="rowSelected"                v-bind:deleteState = "disableDeleteState"                v-bind:editState = "disableEditState"                v-on:delete-line="getAllLines"        ></editor-menu>        <b-overlay :show="busy" rounded="lg" opacity="0.6" z-index="40">            <template #overlay>                <div class="d-flex align-items-center">                    <b-spinner small type="grow" variant="secondary"></b-spinner>                    <b-spinner type="grow" variant="dark"></b-spinner>                    <b-spinner small type="grow" variant="secondary"></b-spinner>                    <!-- We add an SR only text for screen readers -->                    <span class="sr-only">Please wait...</span>                </div>            </template><!--            <template>--><!--                <div class="sort_order">--><!--                    <b-row>--><!--                        <b-col lg="12 justify-content-start d-flex">--><!--                            <b-form-group--><!--                                    label="Порядок сортировки:"--><!--                                    label-for="sortBy"--><!--                            >--><!--                                <b-form-radio-group--><!--                                        id = "sortBy"--><!--                                        v-model="orderLinesBy"--><!--                                        :options="sortedBy"--><!--                                        class="mb-3"--><!--                                        value-field="item"--><!--                                        text-field="name"--><!--                                        disabled-field="notEnabled"--><!--                                        @change="sortLinesList"--><!--                                ></b-form-radio-group>--><!--                            </b-form-group>--><!--                        </b-col>--><!--                    </b-row>--><!--                </div>--><!--            </template>-->            <b-table                    id="metro-table"                    class="b_table"                    ref="selectableTable"                    selectable                    :select-mode="selectMode"                    :items="getList"                    :fields="entryFields"                    :bordered="true"                    responsive="sm"                    :per-page="perPage"                    :current-page="currentPage"                    thead-class="bg-light"                    @row-selected="onRowSelected"                    @row-dblclicked="(item) => onRowDoubleClick(item)"            >                <template #cell(id)="data">                    <span class="selected">                      {{  data.index + 1 + pageSize*(page-1) }}                         </span>                </template>            </b-table><!--            <b-row>--><!--                <b-col>--><!--                </b-col>--><!--                <b-col lg="4 justify-content-end d-flex">--><!--                    <b-pagination--><!--                            size="sm"--><!--                            v-model="page"--><!--                            :total-rows="totalLines"--><!--                            :per-page="pageSize"--><!--                            prev-text="След"--><!--                            next-text="Пред"--><!--                            @change="handlePageChange"--><!--                    ></b-pagination>--><!--                </b-col>--><!--            </b-row>-->            <div>                <b-toast id="success-line-toast" variant="success" solid :append-toast=true>                    <template v-slot:toast-title>                        <div class="d-flex flex-grow-1 align-items-baseline">                            <b-img blank blank-color="#8FBC8F" class="mr-2" width="12" height="12"></b-img>                            <strong class="mr-auto">Успешно!</strong>                        </div>                    </template>                    {{ this.message }}                </b-toast>                <b-toast id="danger-line-toast" variant="danger" solid :append-toast=true>                    <template v-slot:toast-title>                        <div class="d-flex flex-grow-1 align-items-baseline">                            <b-img blank blank-color="#8B0000" class="mr-2" width="12" height="12"></b-img>                            <strong class="mr-auto">Ошибка!</strong>                        </div>                    </template>                    {{ this.message }}                </b-toast>            </div>        </b-overlay>    </div></template><script>    import axios from 'axios'    import EditorMenu from '@/views/EditorMenu.vue'    export default {        name: 'MainTable',        computed: {            getList() {                return this.$store.state.listRecords;            }        },        components: {            EditorMenu        },        data() {            return {                perPage: 100,                currentPage: 1,                entryFields: [                    {key: 'lineId', label: "№"},                    {key: 'line', label: 'Наименование линии', sortable: true},  //change from lineName                    {key: 'numberOfStations', label: 'Количество станций'},                    {key: 'metroLineLength', label: 'Длина линии', sortable: true},                    {key: 'numberOfCarriages', label: 'Количество вагонов', sortable: true},                ],                items: [],                metroEntries: [],                metroLines: [],                selectMode: 'single',                busy: false,                page: 1,                totalLines: 0,                pageSize: 6,                totalPages: 0,                lineCount: 1,                orderLinesBy: 'line', //change from lineName                sortedBy: [                { item: 'line', name: 'Наименование' }, //change from lineName                { item: 'numberOfStations', name: 'Количество станций' },                { item: 'metroLineLength', name: 'Длина линии'},                { item: 'numberOfCarriages', name: 'Количество вагонов' }                ],                selectedItem: null,                disableDeleteState: true,                disableEditState: true,                rowSelected: '',                message: '',            }        },        methods: {            updateListRecords(value) {                this.$store.commit('updateListRecords', value);            },            sortLinesList() {                this.getAllLines()            },            getAllLinesRequestParams(page, pageSize, orderLinesBy) {                let params = {};                if (page) {                    params["page"] = page - 1;                }                if (pageSize) {                    params["pageSize"] = pageSize;                }                if (orderLinesBy) {                    params["orderLinesBy"] = orderLinesBy;                }                return params;            },            handlePageChange(value) {                this.page = value;                this.getAllLines();            },            getAllLines() {                this.busy = true;                const params = this.getAllLinesRequestParams(                    this.page,                    this.pageSize,                    this.orderLinesBy                );                axios.get('/api/lines',                    {                        params: {                            pageSize: params["pageSize"],                            pageNo: params["page"],                            orderLinesBy: params["orderLinesBy"]                        }                    })                    .then(response => {                        if (response.data.length !== 0) {                            this.message = "Список линий загружен"                            this.metroEntries = response.data.metroLines                            this.totalLines = response.data.totalLines;                            this.totalPages = response.data.totalPages;                            this.$bvToast.show('success-line-toast')                        } else {                            this.message = "Список пуст"                            this.$bvToast.show('danger-line-toast')                        }                        this.updateListRecords(this.metroEntries);                    }).catch(() => {                    this.message = "Не удалось подключиться к базе данных!"                    this.$bvToast.show('danger-line-toast')                }).finally(() => {                    this.busy = false                })            },            getListLines() {                this.busy = true;                axios.get('/api/lines')                    .then(response => {                        if (response.data.length !== 0) {                            this.message = "Список линий загружен"                            this.metroEntries = response.data                            this.$bvToast.show('success-line-toast')                        } else {                            this.message = "Список пуст"                            this.$bvToast.show('danger-line-toast')                        }                        this.updateListRecords(this.metroEntries);                    }).catch(() => {                    this.message = "Не удалось подключиться к базе данных!"                    this.$bvToast.show('danger-line-toast')                }).finally(() => {                    this.busy = false                })            },            onRowDoubleClick(item) {                let lineName = item['line']                this.$router.push({name: 'currentLine', params: {Pid: item.lineId, Line: lineName}})            },            onRowSelected(items) {                this.selected = items                this.rowSelected = this.selected[0]                if (this.selected.length === 0) {                    this.disableDeleteState = true                    this.disableEditState = true                } else {                    this.disableDeleteState = false                    this.disableEditState = false                }            },        },        beforeMount() {            this.getListLines()           // this.getAllLines()        },    }    import 'bootstrap/dist/css/bootstrap.css'    import 'bootstrap-vue/dist/bootstrap-vue.css'</script><style scoped>    .mPage {        margin: 10px 10px 50px 10px;        font-size: large;    }    .sort_order {        font-size: 16px;        margin: 10px 10px 0 30px;    }    .b_table {        text-align: center;        font-size: smaller;    }    .selected {        text-align: center;    }    /deep/ .table > tbody > tr.b-table-row-selected > td,    /deep/ .table > tbody > tr.b-table-row-selected > th {        background-color: #DCEDFC;        border: 2px solid #8797A5;    }    /deep/ .table > tbody > tr,    /deep/ .table > tbody > tr > td,    /deep/ .table > tbody > tr > th {        background-color: white;        border: 1px solid #8797A5;    }    /deep/ .table > thead > tr,    /deep/ .table > thead > tr > td,    /deep/ .table > thead > tr > th {        background-color: white;        border: 2px solid #8797A5;    }    /deep/ .form-group .d-block {        text-align: left;    }    /deep/ .custom-control-input is-invalid {        background-color: blueviolet;    }</style>